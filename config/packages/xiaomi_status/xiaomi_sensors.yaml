#################################################################
#                                                               #
#                       Packages/Xiaomi                         #
#                                                               #
#################################################################

#################################################################
#                                                               #
#                          Customize                            #
#                                                               #
#################################################################

homeassistant:
  customize:
    input_select.aqara_remove_device:
      icon: fas:minus-square
    input_select.aqara_play_ringtone:
      icon: fas:play
    input_select.aqara_stop_ringtone:
      icon: fas:stop

#################################################################
#                                                               #
#                           Group                               #
#                                                               #
#################################################################

group:
  xiaomi_door_sensors:
    name: Door Sensors
    view: no
    entities:
      - binary_sensor.front_door
      - binary_sensor.patio_door
      - binary_sensor.back_door
      - binary_sensor.washer_door
      - binary_sensor.dryer_door
      
  xiaomi_window_sensors:
    name: Window Sensors
    view: no
    entities:
      - binary_sensor.kitchen_window
      - binary_sensor.jackson_window
      - binary_sensor.hudson_window
      - binary_sensor.bathroom_window
      - binary_sensor.bedroom_window

  xiaomi_motion_sensors:
    name: Motion Sensors
    view: no
    entities:
      - binary_sensor.playroom_motion
      - binary_sensor.living_motion
      - binary_sensor.entrance_motion
      - binary_sensor.bedroom_motion
      - binary_sensor.hudson_motion
      - binary_sensor.bathroom_motion
      - binary_sensor.patio_motion
      - binary_sensor.jackson_motion
      - binary_sensor.staircase_motion
      
  xiaomi_smoke_sensors:
    name: Smoke Sensors
    view: no
    entities:
      - binary_sensor.downstairs_smoke
      - binary_sensor.upstairs_smoke
      
  xiaomi_temperature_sensors:
    name: Temperature Sensors
    view: no
    entities:
      - binary_sensor.jackson_temperature
      - binary_sensor.bedroom_temperature
      - binary_sensor.hudson_temperature
      - binary_sensor.downstairs_temperature
      - binary_sensor.patio_temperature
      - binary_sensor.playroom_temperature
      - binary_sensor.bathroom_temperature
      
  xiaomi_smart_switches:
    name: Smart Switches
    view: no
    entities:
      - binary_sensor.lounge_fan_button
      - binary_sensor.door_button
      - binary_sensor.hudson_fan_button
      - binary_sensor.jackson_fan_button
      - binary_sensor.bedroom_wall_fan_button
      - binary_sensor.bedside_fan_button
      
  xiaomi_smart_plugs:
    name: Smart Plugs
    view: no
    entities:
      - binary_sensor.washer_switch_plug
      - binary_sensor.entertainment_switch_plug
      - binary_sensor.dryer_switch_plug
      - binary_sensor.appliance_switch_plug
      
  upstairs_motion_sensors:
    name: Upstairs Motion Sensors
    view: no
    entities:
      - binary_sensor.motion_sensor_158d0001e63803
      - binary_sensor.motion_sensor_158d0002006d46
      - binary_sensor.motion_sensor_158d000200e4ab
      - binary_sensor.motion_sensor_158d000201351c
      - binary_sensor.motion_sensor_158d00022c2f21
      
#################################################################
#                                                               #
#                       Input Selects                           #
#                                                               #
#################################################################

input_select:
      
####################################################
#                                                  #
#            Input Select - Remove Device          #
#                                                  #
####################################################

  aqara_remove_device:
    name: Remove Device
    options:
      - None
      - Front Door Sensor
      - Patio Door Sensor
      - Back Door Sensor
      - Washer Door Sensor
      - Dryer Door Sensor
      - Kitchen Window Sensor
      - Jackson Window Sensor
      - Hudson Window Sensor
      - Bathroom Window Sensor
      - Bedroom Window Sensor
      - Playroom Motion Snesor
      - Livingroom Motion Sensor
      - Entrance Motion Sensor
      - Bedroom Motion Sensor
      - Hudson Motion Sensor
      - Bathroom Motion Sensor
      - Patio Motion Sensor
      - Jackson Motion Sensor
      - Staircase Motion Sensor
      - Wardrobe Motion Sensor
      - Office Motion Sensor
      - Downstairs Smoke Alarm
      - Upstairs Smoke Alarm
      - Jackson Temperature
      - Bedroom Temperature
      - Hudson Temerature
      - Downstairs Temerature
      - Patio Temperature
      - Playroom Temerature
      - Bathroom Temperature
      - Lounge Fan Button
      - Door Button
      - Hudson Fan Button
      - Jackson Fan Button
      - Bedroom Wall Fan Button
      - Bedside Fan Button
      - Washer Switch Plug
      - Entertainment Switch Plug
      - Dryer Switch Plug
      - Appliance Switch Plug
      - Bathroom Leak Sensor
      - Kitchen Leak Sensor
      
####################################################
#                                                  #
#            Input Select - Play Ringtone          #
#                                                  #
####################################################

  aqara_play_ringtone:
    name: Play Ringtone
    options:
      - None
      - Police Car 1
      - Police Car 2
      - Accident
      - Countdown
      - Ghost
      - Sniper Rifle
      - Battle
      - Air Raid
      - Bark
      - Doorbell
      - Knock at a Door
      - Amuse
      - Alarm Clock
      - MiMix
      - Enthusiastic
      - Guitar Classic
      - Ice World Piano
      - Leisure Time
      - Childhood
      - Morning Stream Liet
      - Music Box
      - Orange
      - Thinker
      
####################################################
#                                                  #
#            Input Select - Stop Ringtone          #
#                                                  #
####################################################

  aqara_stop_ringtone:
    name: Stop Ringtone
    options:
      - None
      
#################################################################
#                                                               #
#                       Binary Sensors                          #
#                                                               #
#################################################################

binary_sensor:

####################################################
#                                                  #
#              Binary Sensor - Template            #
#                                                  #
####################################################

  - platform: template
    sensors:
## Door Sensors
      front_door:
        friendly_name: Front Door Sensor
        device_class: connectivity
        entity_id: sensor.front_door
        value_template: "{{ is_state('sensor.front_door', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.front_door', 'on') %}
            mdi:door
          {% elif is_state('sensor.front_door', 'off') %}
            mdi:door         
          {% else %}
            mdi:alert
          {% endif %}
      patio_door:
        friendly_name: Patio Door Sensor
        device_class: connectivity
        entity_id: sensor.patio_door
        value_template: "{{ is_state('sensor.patio_door', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.patio_door', 'on') %}
            mdi:door
          {% elif is_state('sensor.patio_door', 'off') %}
            mdi:door         
          {% else %}
            mdi:alert
          {% endif %}
      back_door:
        friendly_name: Back Door Sensor
        device_class: connectivity
        entity_id: sensor.back_door
        value_template: "{{ is_state('sensor.back_door', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.back_door', 'on') %}
            mdi:door
          {% elif is_state('sensor.back_door', 'off') %}
            mdi:door         
          {% else %}
            mdi:alert
          {% endif %}
      washer_door:
        friendly_name: Washer Door Sensor
        device_class: connectivity
        entity_id: sensor.washer_door
        value_template: "{{ is_state('sensor.washer_door', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.washer_door', 'on') %}
            mdi:door
          {% elif is_state('sensor.washer_door', 'off') %}
            mdi:door         
          {% else %}
            mdi:alert
          {% endif %}
      dryer_door:
        friendly_name: Dryer Door Sensor
        device_class: connectivity
        entity_id: sensor.dryer_door
        value_template: "{{ is_state('sensor.dryer_door', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.dryer_door', 'on') %}
            mdi:door
          {% elif is_state('sensor.dryer_door', 'off') %}
            mdi:door         
          {% else %}
            mdi:alert
          {% endif %}
## Window Sensors
      kitchen_window:
        friendly_name: Kitchen Window Sensor
        device_class: connectivity
        entity_id: sensor.kitchen_window
        value_template: "{{ is_state('sensor.kitchen_window', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.kitchen_window', 'on') %}
            mdi:window-closed
          {% elif is_state('sensor.kitchen_window', 'off') %}
            mdi:window-closed        
          {% else %}
            mdi:alert
          {% endif %}
      jackson_window:
        friendly_name: Jackson Window Sensor
        device_class: connectivity
        entity_id: sensor.jackson_window
        value_template: "{{ is_state('sensor.jackson_window', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.jackson_window', 'on') %}
            mdi:window-closed
          {% elif is_state('sensor.jackson_window', 'off') %}
            mdi:window-closed         
          {% else %}
            mdi:alert
          {% endif %}
      hudson_window:
        friendly_name: Hudson Window Sensor
        device_class: connectivity
        entity_id: sensor.hudson_window
        value_template: "{{ is_state('sensor.hudson_window', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.hudson_window', 'on') %}
            mdi:window-closed
          {% elif is_state('sensor.hudson_window', 'off') %}
            mdi:window-closed        
          {% else %}
            mdi:alert
          {% endif %}
      bathroom_window:
        friendly_name: Bathroom Window Sensor
        device_class: connectivity
        entity_id: sensor.bathroom_window
        value_template: "{{ is_state('sensor.bathroom_window', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.bathroom_window', 'on') %}
            mdi:window-closed
          {% elif is_state('sensor.bathroom_window', 'off') %}
            mdi:window-closed       
          {% else %}
            mdi:alert
          {% endif %}
      bedroom_window:
        friendly_name: Bedroom Window Sensor
        device_class: connectivity
        entity_id: sensor.bedroom_window
        value_template: "{{ is_state('sensor.bedroom_window', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.bedroom_window', 'on') %}
            mdi:window-closed
          {% elif is_state('sensor.bedroom_window', 'off') %}
            mdi:window-closed         
          {% else %}
            mdi:alert
          {% endif %}
## Motion Sensors
      playroom_motion:
        friendly_name: Playroom Motion Sensor
        device_class: connectivity
        entity_id: sensor.playroom_motion
        value_template: "{{ is_state('sensor.playroom_motion', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.playroom_motion', 'on') %}
            mdi:walk
          {% elif is_state('sensor.playroom_motion', 'off') %}
            mdi:walk         
          {% else %}
            mdi:alert
          {% endif %}
      living_motion:
        friendly_name: Living Motion Sensor
        device_class: connectivity
        entity_id: sensor.living_motion
        value_template: "{{ is_state('sensor.living_motion', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.living_motion', 'on') %}
            mdi:walk
          {% elif is_state('sensor.living_motion', 'off') %}
            mdi:walk        
          {% else %}
            mdi:alert
          {% endif %}
      entrance_motion:
        friendly_name: Entrance Motion Sensor
        device_class: connectivity
        entity_id: sensor.entrance_motion
        value_template: "{{ is_state('sensor.entrance_motion', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.entrance_motion', 'on') %}
            mdi:walk
          {% elif is_state('sensor.entrance_motion', 'off') %}
            mdi:walk       
          {% else %}
            mdi:alert
          {% endif %}
      bedroom_motion:
        friendly_name: Bedroom Motion Sensor
        device_class: connectivity
        entity_id: sensor.bedroom_motion
        value_template: "{{ is_state('sensor.bedroom_motion', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.bedroom_motion', 'on') %}
            mdi:walk
          {% elif is_state('sensor.bedroom_motion', 'off') %}
            mdi:walk       
          {% else %}
            mdi:alert
          {% endif %}
      hudson_motion:
        friendly_name: Hudson Motion Sensor
        device_class: connectivity
        entity_id: sensor.hudson_motion
        value_template: "{{ is_state('sensor.hudson_motion', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.hudson_motion', 'on') %}
            mdi:walk
          {% elif is_state('sensor.hudson_motion', 'off') %}
            mdi:walk    
          {% else %}
            mdi:alert
          {% endif %}
      bathroom_motion:
        friendly_name: Bathroom Motion Sensor
        device_class: connectivity
        entity_id: sensor.bathroom_motion
        value_template: "{{ is_state('sensor.bathroom_motion', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.bathroom_motion', 'on') %}
            mdi:walk
          {% elif is_state('sensor.bathroom_motion', 'off') %}
            mdi:walk    
          {% else %}
            mdi:alert
          {% endif %}
      patio_motion:
        friendly_name: Patio Motion Sensor
        device_class: connectivity
        entity_id: sensor.patio_motion
        value_template: "{{ is_state('sensor.patio_motion', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.patio_motion', 'on') %}
            mdi:walk
          {% elif is_state('sensor.patio_motion', 'off') %}
            mdi:walk    
          {% else %}
            mdi:alert
          {% endif %}
      jackson_motion:
        friendly_name: Jackson Motion Sensor
        device_class: connectivity
        entity_id: sensor.jackson_motion
        value_template: "{{ is_state('sensor.jackson_motion', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.jackson_motion', 'on') %}
            mdi:walk
          {% elif is_state('sensor.jackson_motion', 'off') %}
            mdi:walk    
          {% else %}
            mdi:alert
          {% endif %}
      staircase_motion:
        friendly_name: Staircase Motion Sensor
        device_class: connectivity
        entity_id: sensor.staircase_motion
        value_template: "{{ is_state('sensor.staircase_motion', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.staircase_motion', 'on') %}
            mdi:walk
          {% elif is_state('sensor.staircase_motion', 'off') %}
            mdi:walk    
          {% else %}
            mdi:alert
          {% endif %}
      downstairs_smoke:
        friendly_name: Downstairs Smoke Sensor
        device_class: connectivity
        entity_id: sensor.downstairs_smoke
        value_template: "{{ is_state('sensor.downstairs_smoke', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.downstairs_smoke', 'on') %}
            mdi:smoke-detector
          {% elif is_state('sensor.downstairs_smoke', 'off') %}
            mdi:smoke-detector
          {% else %}
            mdi:alert
          {% endif %}
      upstairs_smoke:
        friendly_name: Upstairs Smoke Sensor
        device_class: connectivity
        entity_id: sensor.upstairs_smoke
        value_template: "{{ is_state('sensor.upstairs_smoke', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.upstairs_smoke', 'on') %}
            mdi:smoke-detector
          {% elif is_state('sensor.upstairs_smoke', 'off') %}
            mdi:smoke-detector  
          {% else %}
            mdi:alert
          {% endif %}
## Temperature Sensors
      jackson_temperature:
        friendly_name: Jackson Temperature Sensor
        device_class: connectivity
        entity_id: sensor.jackson_temperature
        value_template: "{{ is_state('sensor.jackson_temperature', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.jackson_temperature', 'on') %}
            mdi:thermometer
          {% elif is_state('sensor.jackson_temperature', 'off') %}
            mdi:thermometer      
          {% else %}
            mdi:alert
          {% endif %}
      bedroom_temperature:
        friendly_name: Bedroom Temperature Sensor
        device_class: connectivity
        entity_id: sensor.bedroom_temperature
        value_template: "{{ is_state('sensor.bedroom_temperature', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.bedroom_temperature', 'on') %}
            mdi:thermometer
          {% elif is_state('sensor.bedroom_temperature', 'off') %}
            mdi:thermometer
          {% else %}
            mdi:alert
          {% endif %}
      hudson_temperature:
        friendly_name: Hudson Temperature Sensor
        device_class: connectivity
        entity_id: sensor.hudson_temperature
        value_template: "{{ is_state('sensor.hudson_temperature', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.hudson_temperature', 'on') %}
            mdi:thermometer
          {% elif is_state('sensor.hudson_temperature', 'off') %}
            mdi:thermometer
          {% else %}
            mdi:alert
          {% endif %}
      downstairs_temperature:
        friendly_name: Downstairs Temperature Sensor
        device_class: connectivity
        entity_id: sensor.downstairs_temperature
        value_template: "{{ is_state('sensor.downstairs_temperature', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.downstairs_temperature', 'on') %}
            mdi:thermometer
          {% elif is_state('sensor.downstairs_temperature', 'off') %}
            mdi:thermometer
          {% else %}
            mdi:alert
          {% endif %}
      patio_temperature:
        friendly_name: Patio Temperature Sensor
        device_class: connectivity
        entity_id: sensor.patio_temperature
        value_template: "{{ is_state('sensor.patio_temperature', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.patio_temperature', 'on') %}
            mdi:thermometer
          {% elif is_state('sensor.patio_temperature', 'off') %}
            mdi:thermometer
          {% else %}
            mdi:alert
          {% endif %}
      playroom_temperature:
        friendly_name: Playroom Temperature Sensor
        device_class: connectivity
        entity_id: sensor.playroom_temperature
        value_template: "{{ is_state('sensor.playroom_temperature', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.playroom_temperature', 'on') %}
            mdi:thermometer
          {% elif is_state('sensor.playroom_temperature', 'off') %}
            mdi:thermometer
          {% else %}
            mdi:alert
          {% endif %}
      bathroom_temperature:
        friendly_name: Bathroom Temperature Sensor
        device_class: connectivity
        entity_id: sensor.playroom_temperature
        value_template: "{{ is_state('sensor.bathroom_temperature', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.bathroom_temperature', 'on') %}
            mdi:thermometer
          {% elif is_state('sensor.bathroom_temperature', 'off') %}
            mdi:thermometer
          {% else %}
            mdi:alert
          {% endif %}
## Smart Switches
      lounge_fan_button:
        friendly_name: Lounge Fan Button
        device_class: connectivity
        entity_id: sensor.lounge_fan_button
        value_template: "{{ is_state('sensor.lounge_fan_button', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.lounge_fan_button', 'on') %}
            mdi:radiobox-marked
          {% elif is_state('sensor.lounge_fan_button', 'off') %}
            mdi:radiobox-marked
          {% else %}
            mdi:alert
          {% endif %}
      door_button:
        friendly_name: Door Bell
        device_class: connectivity
        entity_id: sensor.door_button
        value_template: "{{ is_state('sensor.door_button', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.door_button', 'on') %}
            mdi:radiobox-marked
          {% elif is_state('sensor.door_button', 'off') %}
            mdi:radiobox-marked
          {% else %}
            mdi:alert
          {% endif %}
      hudson_fan_button:
        friendly_name: Hudson Fan Button
        device_class: connectivity
        entity_id: sensor.hudson_fan_button
        value_template: "{{ is_state('sensor.hudson_fan_button', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.hudson_fan_button', 'on') %}
            mdi:radiobox-marked
          {% elif is_state('sensor.hudson_fan_button', 'off') %}
            mdi:radiobox-marked
          {% else %}
            mdi:alert
          {% endif %}
      jackson_fan_button:
        friendly_name: Jackson Fan Button
        device_class: connectivity
        entity_id: sensor.jackson_fan_button
        value_template: "{{ is_state('sensor.jackson_fan_button', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.jackson_fan_button', 'on') %}
            mdi:radiobox-marked
          {% elif is_state('sensor.jackson_fan_button', 'off') %}
            mdi:radiobox-marked
          {% else %}
            mdi:alert
          {% endif %}
      bedroom_wall_fan_button:
        friendly_name: Bedroom Wall Fan Button
        device_class: connectivity
        entity_id: sensor.bedroom_wall_fan_button
        value_template: "{{ is_state('sensor.bedroom_wall_fan_button', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.bedroom_wall_fan_button', 'on') %}
            mdi:radiobox-marked
          {% elif is_state('sensor.bedroom_wall_fan_button', 'off') %}
            mdi:radiobox-marked
          {% else %}
            mdi:alert
          {% endif %}
      bedside_fan_button:
        friendly_name: Bedside Fan Button
        device_class: connectivity
        entity_id: sensor.bedside_fan_button
        value_template: "{{ is_state('sensor.bedside_fan_button', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.bedside_fan_button', 'on') %}
            mdi:radiobox-marked
          {% elif is_state('sensor.bedside_fan_button', 'off') %}
            mdi:radiobox-marked
          {% else %}
            mdi:alert
          {% endif %}
## Smart Plugs
      washer_switch_plug:
        friendly_name: Washer Switch Plug
        device_class: connectivity
        entity_id: sensor.washer_switch_plug
        value_template: "{{ is_state('sensor.washer_switch_plug', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.washer_switch_plug', 'on') %}
            mdi:power-plug
          {% elif is_state('sensor.washer_switch_plug', 'off') %}
            mdi:power-plug
          {% else %}
            mdi:alert
          {% endif %}
      entertainment_switch_plug:
        friendly_name: Entertainment Switch Plug
        device_class: connectivity
        entity_id: sensor.entertainment_switch_plug
        value_template: "{{ is_state('sensor.entertainment_switch_plug', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.entertainment_switch_plug', 'on') %}
            mdi:power-plug
          {% elif is_state('sensor.entertainment_switch_plug', 'off') %}
            mdi:power-plug
          {% else %}
            mdi:alert
          {% endif %}
      dryer_switch_plug:
        friendly_name: Dryer Switch Plug
        device_class: connectivity
        entity_id: sensor.dryer_switch_plug
        value_template: "{{ is_state('sensor.dryer_switch_plug', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.dryer_switch_plug', 'on') %}
            mdi:power-plug
          {% elif is_state('sensor.dryer_switch_plug', 'off') %}
            mdi:power-plug
          {% else %}
            mdi:alert
          {% endif %}
      appliance_switch_plug:
        friendly_name: Appliance Switch Plug
        device_class: connectivity
        entity_id: sensor.appliance_switch_plug
        value_template: "{{ is_state('sensor.appliance_switch_plug', 'on') }}"
        icon_template: >-
          {% if is_state('sensor.appliance_switch_plug', 'on') %}
            mdi:power-plug
          {% elif is_state('sensor.appliance_switch_plug', 'off') %}
            mdi:power-plug
          {% else %}
            mdi:alert
          {% endif %}

#################################################################
#                                                               #
#                            Sensors                            #
#                                                               #
#################################################################

sensor:

####################################################
#                                                  #
#                 Sensor - Template                #
#                                                  #
####################################################

  - platform: template
    sensors:
## Door Sensors
      front_door:
        friendly_name: "Front Door"
        value_template: >-
          {% if is_state('binary_sensor.door_window_sensor_158d00022016b2', 'on') %}
            on
          {% elif is_state('binary_sensor.door_window_sensor_158d00022016b2', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      patio_door:
        friendly_name: "Patio Door"
        value_template: >-
          {% if is_state('binary_sensor.door_window_sensor_158d000225432d', 'on') %}
            on
          {% elif is_state('binary_sensor.door_window_sensor_158d000225432d', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      back_door:
        friendly_name: "Back Door"
        value_template: >-
          {% if is_state('binary_sensor.door_window_sensor_158d0001e73c09', 'on') %}
            on
          {% elif is_state('binary_sensor.door_window_sensor_158d0001e73c09', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      washer_door:
        friendly_name: "Washer Door"
        value_template: >-
          {% if is_state('binary_sensor.door_window_sensor_158d0001e73a83', 'on') %}
            on
          {% elif is_state('binary_sensor.door_window_sensor_158d0001e73a83', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      dryer_door:
        friendly_name: "Dryer Door"
        value_template: >-
          {% if is_state('binary_sensor.door_window_sensor_158d0001e73bc5', 'on') %}
            on
          {% elif is_state('binary_sensor.door_window_sensor_158d0001e73bc5', 'off') %}
            on
          {% else %}
            off
          {% endif %}
## Window Sensors
      kitchen_window:
        friendly_name: "Kitchen Window"
        value_template: >-
          {% if is_state('binary_sensor.door_window_sensor_158d0001e73af4', 'on') %}
            on
          {% elif is_state('binary_sensor.door_window_sensor_158d0001e73af4', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      jackson_window:
        friendly_name: "Jackson Window"
        value_template: >-
          {% if is_state('binary_sensor.door_window_sensor_158d0001e73a73', 'on') %}
            on
          {% elif is_state('binary_sensor.door_window_sensor_158d0001e73a73', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      hudson_window:
        friendly_name: "Hudson Window"
        value_template: >-
          {% if is_state('binary_sensor.door_window_sensor_158d0001e73aad', 'on') %}
            on
          {% elif is_state('binary_sensor.door_window_sensor_158d0001e73aad', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      bathroom_window:
        friendly_name: "Bathroom Window"
        value_template: >-
          {% if is_state('binary_sensor.door_window_sensor_158d0001e74875', 'on') %}
            on
          {% elif is_state('binary_sensor.door_window_sensor_158d0001e74875', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      bedroom_window:
        friendly_name: "Bedroom Window"
        value_template: >-
          {% if is_state('binary_sensor.door_window_sensor_158d0001f36741', 'on') %}
            on
          {% elif is_state('binary_sensor.door_window_sensor_158d0001f36741', 'off') %}
            on
          {% else %}
            off
          {% endif %}
## Motion Sensors
      playroom_motion:
        friendly_name: "Playroom Motion"
        value_template: >-
          {% if is_state('binary_sensor.motion_sensor_158d0001e5cf11', 'on') %}
            on
          {% elif is_state('binary_sensor.motion_sensor_158d0001e5cf11', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      living_motion:
        friendly_name: "Living Motion"
        value_template: >-
          {% if is_state('binary_sensor.motion_sensor_158d0001e5d118', 'on') %}
            on
          {% elif is_state('binary_sensor.motion_sensor_158d0001e5d118', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      entrance_motion:
        friendly_name: "Entrance Motion"
        value_template: >-
          {% if is_state('binary_sensor.motion_sensor_158d0001e5d147', 'on') %}
            on
          {% elif is_state('binary_sensor.motion_sensor_158d0001e5d147', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      bedroom_motion:
        friendly_name: "Bedroom Motion"
        value_template: >-
          {% if is_state('binary_sensor.motion_sensor_158d0001e63803', 'on') %}
            on
          {% elif is_state('binary_sensor.motion_sensor_158d0001e63803', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      hudson_motion:
        friendly_name: "Hudson Motion"
        value_template: >-
          {% if is_state('binary_sensor.motion_sensor_158d0002006d46', 'on') %}
            on
          {% elif is_state('binary_sensor.motion_sensor_158d0002006d46', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      bathroom_motion:
        friendly_name: "Bathroom Motion"
        value_template: >-
          {% if is_state('binary_sensor.motion_sensor_158d000200e4ab', 'on') %}
            on
          {% elif is_state('binary_sensor.motion_sensor_158d000200e4ab', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      patio_motion:
        friendly_name: "Patio Motion"
        value_template: >-
          {% if is_state('binary_sensor.motion_sensor_158d000200ea5b', 'on') %}
            on
          {% elif is_state('binary_sensor.motion_sensor_158d000200ea5b', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      jackson_motion:
        friendly_name: "Jackson Motion"
        value_template: >-
          {% if is_state('binary_sensor.motion_sensor_158d000201351c', 'on') %}
            on
          {% elif is_state('binary_sensor.motion_sensor_158d000201351c', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      staircase_motion:
        friendly_name: "Staircase Motion"
        value_template: >-
          {% if is_state('binary_sensor.motion_sensor_158d00022c2f21', 'on') %}
            on
          {% elif is_state('binary_sensor.motion_sensor_158d00022c2f21', 'off') %}
            on
          {% else %}
            off
          {% endif %}
## Motion Sensors
      downstairs_smoke:
        friendly_name: "Downstairs Smoke"
        value_template: >-
          {% if is_state('binary_sensor.smoke_sensor_158d0001b8ddc7', 'on') %}
            on
          {% elif is_state('binary_sensor.smoke_sensor_158d0001b8ddc7', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      upstairs_smoke:
        friendly_name: "Upstairs Smoke"
        value_template: >-
          {% if is_state('binary_sensor.smoke_sensor_158d0001b8deba', 'on') %}
            on
          {% elif is_state('binary_sensor.smoke_sensor_158d0001b8deba', 'off') %}
            on
          {% else %}
            off
          {% endif %}
## Temerature Sensors
      jackson_temperature:
        friendly_name: "Jackson Temperature"
        value_template: >-
          {% if is_state('sensor.temperature_158d0001f534e1', 'unavailable') %}
            off
          {% else %}
            on
          {% endif %}
      bedroom_temperature:
        friendly_name: "Bedroom Temperature"
        value_template: >-
          {% if is_state('sensor.temperature_158d0001f53de9', 'unavailable') %}
            off
          {% else %}
            on
          {% endif %}
      hudson_temperature:
        friendly_name: "Hudson Temperature"
        value_template: >-
          {% if is_state('sensor.temperature_158d0001f54df3', 'unavailable') %}
            off
          {% else %}
            on
          {% endif %}
      downstairs_temperature:
        friendly_name: "Downstairs Temperature"
        value_template: >-
          {% if is_state('sensor.temperature_158d0001f558f5', 'unavailable') %}
            off
          {% else %}
            on
          {% endif %}
      patio_temperature:
        friendly_name: "Patio Temperature"
        value_template: >-
          {% if is_state('sensor.temperature_158d0001f56350', 'unavailable') %}
            off
          {% else %}
            on
          {% endif %}
      playroom_temperature:
        friendly_name: "Playroom Temperature"
        value_template: >-
          {% if is_state('sensor.temperature_158d0001f56682', 'unavailable') %}
            off
          {% else %}
            on
          {% endif %}
      bathroom_temperature:
        friendly_name: "Bathroom Temperature"
        value_template: >-
          {% if is_state('sensor.temperature_158d00022c7248', 'unavailable') %}
            off
          {% else %}
            on
          {% endif %}
## Smart Switches
      lounge_fan_button:
        friendly_name: "Lounge Fan Button"
        value_template: >-
          {% if is_state('binary_sensor.switch_158d000201ce4e', 'on') %}
            on
          {% elif is_state('binary_sensor.switch_158d000201ce4e', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      door_button:
        friendly_name: "Door Button"
        value_template: >-
          {% if is_state('binary_sensor.switch_158d000213108e', 'on') %}
            on
          {% elif is_state('binary_sensor.switch_158d000213108e', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      hudson_fan_button:
        friendly_name: "Hudson Fan Button"
        value_template: >-
          {% if is_state('binary_sensor.switch_158d000213455d', 'on') %}
            on
          {% elif is_state('binary_sensor.switch_158d000213455d', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      jackson_fan_button:
        friendly_name: "Jackson Fan Button"
        value_template: >-
          {% if is_state('binary_sensor.switch_158d00021347cc', 'on') %}
            on
          {% elif is_state('binary_sensor.switch_158d00021347cc', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      bedroom_wall_fan_button:
        friendly_name: "Bedroom Wall Fan Button"
        value_template: >-
          {% if is_state('binary_sensor.switch_158d000215aa27', 'on') %}
            on
          {% elif is_state('binary_sensor.switch_158d000215aa27', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      bedside_fan_button:
        friendly_name: "Bedside Fan Button"
        value_template: >-
          {% if is_state('binary_sensor.switch_158d000233a19d', 'on') %}
            on
          {% elif is_state('binary_sensor.switch_158d000233a19d', 'off') %}
            on
          {% else %}
            off
          {% endif %}
## Smart Plugs
      washer_switch_plug:
        friendly_name: "Washer Switch Plug"
        value_template: >-
          {% if is_state('switch.plug_158d0001bc2b6d', 'on') %}
            on
          {% elif is_state('switch.plug_158d0001bc2b6d', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      entertainment_switch_plug:
        friendly_name: "Entertainment Switch Plug"
        value_template: >-
          {% if is_state('switch.plug_158d0001f24e2b', 'on') %}
            on
          {% elif is_state('switch.plug_158d0001f24e2b', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      dryer_switch_plug:
        friendly_name: "Dryer Switch Plug"
        value_template: >-
          {% if is_state('switch.plug_158d00022ae069', 'on') %}
            on
          {% elif is_state('switch.plug_158d00022ae069', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      appliance_switch_plug:
        friendly_name: "Appliance Switch Plug"
        value_template: >-
          {% if is_state('switch.plug_158d00022ae22d', 'on') %}
            on
          {% elif is_state('switch.plug_158d00022ae22d', 'off') %}
            on
          {% else %}
            off
          {% endif %}
## Water Leak Sensors
      bathroom_leak_sensor:
        friendly_name: "Bathroom Leak Sensor"
        value_template: >-
          {% if is_state('binary_sensor.water_leak_sensor_158d0002338651', 'on') %}
            on
          {% elif is_state('binary_sensor.water_leak_sensor_158d0002338651', 'off') %}
            on
          {% else %}
            off
          {% endif %}
      kitchen_leak_sensor:
        friendly_name: "Bathroom Leak Sensor"
        value_template: >-
          {% if is_state('binary_sensor.water_leak_sensor_158d00026e26dc', 'on') %}
            on
          {% elif is_state('binary_sensor.water_leak_sensor_158d00026e26dc', 'off') %}
            on
          {% else %}
            off
          {% endif %}
## Gateway State Sensors Lovelace UI
      xiaomi_gw_1_add_device:
        friendly_name: "Xiaomi Gateway 1 Add"
        value_template: >-
          {% if is_state('sensor.persistant_notification', 'Join') %}
            on
          {% else %}
            off
          {% endif %}
        icon_template: >-
          {% if is_state('sensor.persistant_notification', 'Join') %}
            fas:plus-square
          {% else %}
            fas:plus-square
          {% endif %}
          
      xiaomi_gw_1_remove_device:
        friendly_name: "Xiaomi Gateway 1 Remove"
        value_template: >-
          {% if is_state('sensor.persistant_notification', 'Join') %}
            on
          {% else %}
            off
          {% endif %}
        icon_template: >-
          {% if is_state('sensor.persistant_notification', 'Join') %}
            fas:plus-square
          {% else %}
            fas:plus-square
          {% endif %}
         
## No Motion Since
      playroom_no_motion_since:
        friendly_name: "Playroom No Motion Since"
        value_template: "{{ states.binary_sensor.motion_sensor_158d0001e5cf11.attributes['No motion since'] }}"
        
      living_no_motion_since:
        friendly_name: "Living No Motion Since"
        value_template: "{{ states.binary_sensor.motion_sensor_158d0001e5d118.attributes['No motion since'] }}"
        
      staircase_no_motion_since:
        friendly_name: "Staircase No Motion Since"
        value_template: "{{ states.binary_sensor.motion_sensor_158d00022c2f21.attributes['No motion since'] }}"
        
      entrance_no_motion_since:
        friendly_name: "Entrance No Motion Since"
        value_template: "{{ states.binary_sensor.motion_sensor_158d0001e5d147.attributes['No motion since'] }}"
        
      bedroom_no_motion_since:
        friendly_name: "Bedroom No Motion Since"
        value_template: "{{ states.binary_sensor.motion_sensor_158d0001e63803.attributes['No motion since'] }}"
        
      garage_no_motion_since:
        friendly_name: "Garage No Motion Since"
        value_template: "{{ states.binary_sensor.motion_sensor_158d0001fa41fd.attributes['No motion since'] }}"
        
      hudson_no_motion_since:
        friendly_name: "Hudson No Motion Since"
        value_template: "{{ states.binary_sensor.motion_sensor_158d0002006d46.attributes['No motion since'] }}"
        
      bathroom_no_motion_since:
        friendly_name: "Bathroom No Motion Since"
        value_template: "{{ states.binary_sensor.motion_sensor_158d000200e4ab.attributes['No motion since'] }}"
        
      patio_no_motion_since:
        friendly_name: "Patio No Motion Since"
        value_template: "{{ states.binary_sensor.motion_sensor_158d000200ea5b.attributes['No motion since'] }}"
        
      jackson_no_motion_since:
        friendly_name: "Jackson No Motion Since"
        value_template: "{{ states.binary_sensor.motion_sensor_158d000201351c.attributes['No motion since'] }}"
        
      wardrobe_no_motion_since:
        friendly_name: "Wardrobe No Motion Since"
        value_template: "{{ states.binary_sensor.motion_sensor_158d0001d56ccb.attributes['No motion since'] }}"
        
      office_no_motion_since:
        friendly_name: "Office No Motion Since"
        value_template: "{{ states.binary_sensor.motion_sensor_158d0001e5d103.attributes['No motion since'] }}"
        
#################################################################
#                                                               #
#                         Xiaomi Aqara                          #
#                                                               #
#################################################################

xiaomi_aqara:
  discovery_retry: 5
  gateways:
    - mac: !secret xiaomimac
      key: !secret xiaomikey
      host: !secret xiaomi_gw_1
    - mac: !secret xiaomimac2
      key: !secret xiaomikey2
      host: !secret xiaomi_gw_2
      
#################################################################
#                                                               #
#                        Automations                            #
#                                                               #
#################################################################

automation:

  - id: '1547422886219'
    alias: Front Door Sensor Remove
    trigger:
    - entity_id: input_select.aqara_remove_device
      platform: state
      to: Front Door Sensor
    action:
    - data:
        device_id: 158dxxxxxxxxxx
        gw_mac: '!secret xiaomimac'
      service: xiaomi_aqara.remove_device
      
  - id: 'play_0'
    alias: Play Police 1 Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Police Car 1
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '0'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_1'
    alias: Play Police 2 Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Police Car 2
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '1'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_2'
    alias: Play Accident Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Accident
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '2'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_3'
    alias: Play Countdown Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Countdown
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '3'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_4'
    alias: Play Ghost Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Ghost
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '4'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_5'
    alias: Play Sniper Rifle Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Sniper Rifle
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '5'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_6'
    alias: Play Battle Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Battle
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '6'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_7'
    alias: Play Air Raid Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Air Raid
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '7'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_8'
    alias: Play Bark Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Bark
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '8'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_10'
    alias: Play Doorbell Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Doorbell
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '10'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_11'
    alias: Play Knock at a door Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Knock at a Door
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '11'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_12'
    alias: Play Amuse Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Amuse
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '12'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_13'
    alias: Play Alarm Clock Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Alarm Clock
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '13'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_20'
    alias: Play MiMix Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: MiMix
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '20'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_21'
    alias: Play Enthusiastic Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Enthusiastic
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '21'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_22'
    alias: Play Guitar Classic Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Guitar Classic
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '22'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_23'
    alias: Play Ice World Piano Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Ice World Piano
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '23'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_24'
    alias: Play Leisure Time Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Leisure Time
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '24'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_25'
    alias: Play Childhood Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Childhood
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '25'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_26'
    alias: Play Morning Stream Liet Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Morning Stream Liet
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '26'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_27'
    alias: Play Music Box Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Music Box
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '27'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_28'
    alias: Play Orange Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Orange
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '28'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
      
  - id: 'play_29'
    alias: Play Thinker Ringtone
    trigger:
    - entity_id: input_select.aqara_play_ringtone
      platform: state
      to: Thinker
    action:
    - data:
        gw_mac: '!secret xiaomimac'
        ringtone_id: '29'
        ringtone_vol: '30'
      service: xiaomi_aqara.play_ringtone
